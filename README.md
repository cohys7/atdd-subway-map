# 지하철 노선도 미션

[ATDD 강의](https://edu.nextstep.camp/c/R89PYi5H) 실습을 위한 지하철 노선도 애플리케이션

## 🚀 1단계 - 지하철역 인수 테스트 작성

### 기능 요구사항

- [x] 지하철역 목록 조회 인수 테스트 작성하기
- [x] 지하철역 삭제 인수 테스트 작성하기

### 프로그래밍 요구사항

- [x] 인수 테스트의 재사용성과 가독성, 그리고 빠른 테스트 의도 파악을 위해 인수 테스트 리팩터링 하기
    - 재사용성을 위해 메서드 분리
    - 가독성 및 빠른 테스트 의도 파악을 위해 한글 메서드명 사용

## 🚀 2단계 - 지하철 노선 관리

### 기능 요구사항

- [x] 지하철 노선 생성
- [x] 지하철 노선 목록 조회
- [x] 지하철 노선 조회
- [x] 지하철 노선 수정
- [x] 지하철 노선 삭제

### 프로그래밍 요구사항

- 아래의 순서로 기능 구현하기
  - 인수 조건을 검증하는 인수 테스트 작성
  - 인수 테스트를 충족하는 기능 구현
- 인수 테스트 격리하기 (서로 영향을 미치지 않도록 격리)
  - 각 테스트 메서드 실행마다 Context 재생성하도록 설정
- 인수 테스트 리팩터링 (재사용성, 가독성, 빠른 테스트 의도 파악을 위해)
  - 테스트에서 중복 사용되는 메서드 분리 (helper 클래스)
- 기타 리팩토링
  - 패키지 분리
  - 예외 처리 추가

## 🚀 3단계 - 지하철 구간 관리

### 기능 요구사항

- 지하철 구간 관리 기능 구현
- 요구사항 정의 -> 인수 조건 도출 -> 인수 테스트 작성
- 예외 케이스에 대한 검증

### 프로그래밍 요구사항

- 인수 테스트 주도 개발 프로세스에 따라 기능 구현
  - 인수 조건 정의 -> 인수 테스트 작성 -> 기능 구현
- 인수 테스트 메서드 상단에 주석으로 인수 조건 작성
- 인수 테스트 격리
- 인수 테스트 리팩터링

### 요구사항 정리

#### 구간 등록 기능

- 새로운 노선을 등록하면 구간이 생긴다.
- 노선에 구간을 추가하면 새로운 구간이 등록되고, 노선의 하행 종점역과 거리를 번경한다.
- 새로운 구간의 상행역이 해당 노선의 하행 종점역이 아니면 구간을 만들 수 없다.
- 새로운 구간의 하행역이 해당 노선에 등록된 역이면 구간을 만들 수 없다.

#### 구간 제거 기능

- 지하철 노선에 등록된 마지막 구간을 제거하며, 노선의 하행 종점역이 변경된다.
- 마지막 구간이 아닌 경우 제거할 수 없다.
- 지하철 노선의 구간이 하나인 경우 역을 삭제할 수 없다.

#### 구간 조회 기능

- 노선의 전체 구간을 조회할 수 있다.

### 인수조건

노선 생성 시 기본 구간 등록

```
Given 지하철 노선을 생성하고
When 해당 노선의 구간 목록을 조회하면
Then 생성한 구간을 찾을 수 있다.
```

구간 등록 기능

```
Given 지하철 노선에 새로운 구간을 등록하고,
When 해당 노선의 구간 목록을 조회하면
Then 생성한 구간을 찾을 수 있다.
Then 해당 노선의 하행 종점역과 거리가 업데이트 된다.
```

상행역을 잘못 지정한 구간 등록

```
Given 지하철 노선을 생성하고
When 상행역이 해당 노선의 하행 종점역이 아닌 구간을 등록하면
Then 구간이 생성되지 않는다.
```

이미 등록된 역이 포함된 구간 등록

```
Given 지하철 노선을 생성하고
When 하행역이 해당 노선에 등록된 역인 구간을 등록하면
Then 구간이 생성되지 않는다.
```

구간 조회 기능

```
Given 지하철 노선에 새로운 구간을 등록하고
When 지하철 구간 목록을 조회하면
Then 2개의 구간을 응답 받는다.
```

구간 제거 기능

```
Given 지하철 노선과 구간을 생성하고,
When 노선의 마지막 구간을 제거하면
Then 노선 목록 조회 시 해당 구간을 확인할 수 없다.
```

중간 구간 제거 불가

```
Given 지하철 노선과 구간을 2개 생성하고,
When 지하철 노선의 중간 구간을 지우면
Then 구간을 삭제할 수 없다.
```

구간이 하나인 경우 제거 불가

```
Given 지하철 노선을 생성하고,
When 지하철 노선의 구간을 삭제하면
Then 구간을 삭제할 수 없다.
```
